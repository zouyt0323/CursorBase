# Android App 式様書模板

以下为输出式样文档的标准模板。所有内容使用中文。

---

```markdown
# [应用名称] — Android App 技术式样书

> 版本：v1.0
> 日期：YYYY-MM-DD
> 作者：[团队/个人]
> 状态：草案 / 评审中 / 已确认

---

## 目录

1. [产品概述](#1-产品概述)
   - 1.1 产品愿景 | 1.2 目标用户 | 1.3 核心价值主张
   - 1.4 竞品分析 | 1.5 技术栈选型 | 1.6 目标平台
   - 1.7 成功指标 (KPI) | 1.8 假设与依赖 | 1.9 风险评估
2. [用户画像与用户旅程](#2-用户画像与用户旅程)
3. [功能需求详细说明](#3-功能需求详细说明)
4. [界面设计规范](#4-界面设计规范)
5. [技术架构](#5-技术架构)
6. [非功能需求](#6-非功能需求)
7. [发布计划](#7-发布计划)
8. [附录](#8-附录)

---

## 1. 产品概述

### 1.1 产品愿景

[一句话描述产品的核心价值]

### 1.2 目标用户

| 用户类型 | 描述 | 占比 |
|----------|------|------|
| 主要用户 | [描述] | XX% |
| 次要用户 | [描述] | XX% |

### 1.3 核心价值主张

- [价值点 1]
- [价值点 2]
- [价值点 3]

### 1.4 竞品分析

| 竞品 | 优势 | 劣势 | 我们的差异化 |
|------|------|------|-------------|
| [竞品A] | | | |
| [竞品B] | | | |
| [竞品C] | | | |

### 1.5 技术栈选型

| 类别 | 选型 | 理由 |
|------|------|------|
| 语言 | Kotlin | [理由] |
| UI 框架 | Jetpack Compose | [理由] |
| 架构模式 | MVVM + Clean Architecture | [理由] |
| DI | Hilt | [理由] |
| 网络 | Retrofit + OkHttp | [理由] |
| 本地存储 | Room + DataStore | [理由] |
| 特定 API | [如 CameraX] | [理由] |

### 1.6 目标平台

- Android 最低版本：API XX (Android XX)
- 目标版本：API XX (Android XX)
- 支持设备：手机 / 平板 / 折叠屏
- 屏幕方向：竖屏 / 横屏 / 自适应

### 1.7 成功指标 (KPI)

| 指标类别 | 指标名称 | 目标值 | 测量方式 |
|---------|---------|--------|---------|
| 用户增长 | DAU | [目标] | Analytics |
| 用户留存 | 次日留存率 | >= XX% | Analytics |
| 用户体验 | App Store 评分 | >= 4.5 | Store Console |
| 性能 | 崩溃率 | < 0.5% | Crashlytics |
| 业务 | [核心业务指标] | [目标] | [测量方式] |

### 1.8 假设与依赖

**假设**：

- [ ] [假设 1：如"用户设备普遍支持 Camera2 API Level 3"]
- [ ] [假设 2：如"后端 API 在 v1.0 发布前可用"]
- [ ] [假设 3：如"目标用户熟悉相机应用基本操作"]

**外部依赖**：

| 依赖项 | 提供方 | 当前状态 | 风险等级 |
|--------|-------|---------|---------|
| [如 后端 API] | [团队/服务] | 开发中 / 已就绪 | 高/中/低 |
| [如 第三方 SDK] | [提供商] | 可用 / 评估中 | 高/中/低 |

### 1.9 风险评估

| 风险 ID | 风险描述 | 影响 | 可能性 | 缓解策略 |
|---------|---------|------|--------|---------|
| R-001 | [如 Camera API 兼容性问题] | 高/中/低 | 高/中/低 | [缓解措施] |
| R-002 | [如 性能未达标] | 高/中/低 | 高/中/低 | [缓解措施] |
| R-003 | [如 第三方库停止维护] | 高/中/低 | 高/中/低 | [缓解措施] |

---

## 2. 用户画像与用户旅程

### 2.1 用户画像

#### 画像 A：[名称]

| 属性 | 描述 |
|------|------|
| 年龄段 | |
| 职业 | |
| 技术水平 | 初级 / 中级 / 高级 |
| 使用频率 | 每日 / 每周 / 偶尔 |
| 痛点 | |
| 目标 | |
| 使用场景 | |

#### 画像 B：[名称]

[同上格式]

### 2.2 核心用户旅程

#### 旅程 1：[旅程名称]

```
[入口] → [步骤1] → [步骤2] → [决策点] → [步骤3] → [完成]
                                  ↓
                             [异常路径] → [错误处理] → [恢复]
```

**详细步骤**：

| 步骤 | 用户动作 | 系统响应 | 备注 |
|------|---------|---------|------|
| 1 | | | |
| 2 | | | |
| 3 | | | |

---

## 3. 功能需求详细说明

### 3.1 功能概览

| 模块 | 功能数 | 优先级分布 |
|------|--------|-----------|
| [模块A] | X 个 | P0: X, P1: X, P2: X |
| [模块B] | X 个 | P0: X, P1: X, P2: X |

### 3.2 [模块名称]

#### F-[编号]: [功能名称]

| 属性 | 值 |
|------|------|
| **功能 ID** | F-XXX |
| **优先级** | P0 / P1 / P2 |
| **所属模块** | [模块名] |
| **描述** | [50-100 字描述] |
| **前置条件** | [触发前需要满足的条件] |
| **触发方式** | [用户如何触发此功能] |

**验收标准**：

- [ ] [可测试的标准 1]
- [ ] [可测试的标准 2]
- [ ] [可测试的标准 3]

**Android 特殊考虑**：

- 所需权限：[如 CAMERA, RECORD_AUDIO]
- 硬件依赖：[如 Camera2 API Level]
- 生命周期处理：[如 Activity/Fragment 重建时的状态恢复]

**异常处理**：

| 异常场景 | 处理方式 | 用户提示 |
|---------|---------|---------|
| [异常1] | | |
| [异常2] | | |

---

## 4. 界面设计规范

### 4.1 导航结构

```
[应用入口]
├── [Tab 1 / 主页面]
│   ├── [子页面 A]
│   └── [子页面 B]
├── [Tab 2]
├── [Tab 3]
└── [设置]
    ├── [设置项 A]
    └── [设置项 B]
```

### 4.2 屏幕清单

| 屏幕 ID | 屏幕名称 | 入口 | 功能概述 |
|---------|---------|------|---------|
| S-001 | | | |
| S-002 | | | |

### 4.3 [屏幕名称] 详细设计

**布局描述**：

```
┌─────────────────────────┐
│       状态栏 (系统)       │
├─────────────────────────┤
│       顶部工具栏          │
│  [返回] [标题] [更多菜单]  │
├─────────────────────────┤
│                         │
│       主要内容区域        │
│                         │
│                         │
├─────────────────────────┤
│       底部操作栏          │
│  [操作1] [主操作] [操作2]  │
├─────────────────────────┤
│       底部导航栏          │
└─────────────────────────┘
```

**交互说明**：

| 交互元素 | 触发方式 | 响应行为 | 动画 |
|---------|---------|---------|------|
| | 点击 / 长按 / 滑动 | | 时长/缓动 |

### 4.4 设计系统

#### 颜色方案

| 用途 | 浅色主题 | 深色主题 | Material You |
|------|---------|---------|-------------|
| Primary | #XXXXXX | #XXXXXX | Dynamic |
| Secondary | | | |
| Background | | | |
| Surface | | | |
| Error | | | |
| On-Primary | | | |

#### 字体排版

| 层级 | 字号 | 字重 | 行高 | 用途 |
|------|------|------|------|------|
| Display Large | 57sp | 400 | 64sp | 主标题 |
| Headline Medium | 28sp | 400 | 36sp | 次标题 |
| Body Large | 16sp | 400 | 24sp | 正文 |
| Label Medium | 12sp | 500 | 16sp | 标签 |

#### 间距系统

| 级别 | 尺寸 | 用途 |
|------|------|------|
| xs | 4dp | 紧凑间距 |
| sm | 8dp | 小间距 |
| md | 16dp | 标准间距 |
| lg | 24dp | 大间距 |
| xl | 32dp | 区块间距 |

### 4.5 手势与交互

| 手势 | 适用区域 | 行为 |
|------|---------|------|
| 单击 | | |
| 双击 | | |
| 长按 | | |
| 左右滑动 | | |
| 上下滑动 | | |
| 双指缩放 | | |

### 4.6 无障碍设计

- [ ] 所有图片/图标有 contentDescription
- [ ] 触摸目标 >= 48dp x 48dp
- [ ] 文字对比度 >= 4.5:1（正文）/ 3:1（大文字）
- [ ] 支持 TalkBack 读屏
- [ ] 支持字体缩放（最大 200%）
- [ ] 焦点顺序合理

---

## 5. 技术架构

### 5.1 架构分层

```
┌─────────────────────────────────┐
│           Presentation          │
│  (Compose UI + ViewModel)       │
├─────────────────────────────────┤
│             Domain              │
│  (Use Cases + Entities)         │
├─────────────────────────────────┤
│              Data               │
│  (Repository + DataSource)      │
├─────────────────────────────────┤
│           Framework             │
│  (Android SDK + 第三方库)        │
└─────────────────────────────────┘
```

### 5.2 模块划分

```
app/
├── :app                    # Application 模块
├── :core
│   ├── :core-ui            # 通用 UI 组件
│   ├── :core-data          # 数据层基础
│   ├── :core-domain        # 领域层基础
│   └── :core-common        # 通用工具
├── :feature
│   ├── :feature-[模块A]    # 功能模块 A
│   ├── :feature-[模块B]    # 功能模块 B
│   └── :feature-settings   # 设置模块
└── :test
    └── :test-shared        # 共享测试工具
```

### 5.3 数据流

```
UI Event → ViewModel → UseCase → Repository → DataSource
                                                  ↓
                                         Local DB / Remote API
                                                  ↓
UI State ← ViewModel ← UseCase ← Repository ← Response
```

### 5.4 关键技术决策

| 决策项 | 选择 | 备选方案 | 选择理由 |
|--------|------|---------|---------|
| | | | |

### 5.5 系统上下文图

```
                    ┌──────────┐
                    │  用户     │
                    └────┬─────┘
                         │
                    ┌────▼─────┐
                    │ Android  │
                    │   App    │
                    └──┬───┬───┘
                       │   │
            ┌──────────┘   └──────────┐
            ▼                         ▼
    ┌───────────────┐        ┌───────────────┐
    │  Android OS   │        │  Cloud API    │
    │  (Camera/     │        │  (后端服务)    │
    │   Storage/    │        │               │
    │   Sensors)    │        │               │
    └───────────────┘        └───────────────┘
```

### 5.6 第三方依赖清单

| 库名称 | 版本 | 用途 | 许可证 |
|--------|------|------|--------|
| | | | |

---

## 6. 非功能需求

### 6.1 性能目标

| 指标 | 目标值 | 测量方法 |
|------|--------|---------|
| 冷启动时间 | < 1.5s | Android Vitals |
| 帧率 | >= 60fps | Systrace |
| 内存占用 | < 200MB | Android Profiler |
| APK 大小 | < 50MB | bundletool |
| 网络请求响应 | < 2s (P95) | Firebase Performance |

### 6.2 安全需求

- [ ] 敏感数据加密存储（EncryptedSharedPreferences / 加密 Room）
- [ ] 网络通信 HTTPS + Certificate Pinning
- [ ] API Key 不硬编码（使用 local.properties / BuildConfig）
- [ ] ProGuard/R8 混淆
- [ ] 权限最小化原则

### 6.3 隐私合规

- [ ] 隐私政策文档
- [ ] 用户数据收集说明
- [ ] 数据删除功能
- [ ] 第三方 SDK 隐私声明
- [ ] 应用商店隐私标签

### 6.4 离线支持

| 功能 | 离线行为 | 同步策略 |
|------|---------|---------|
| | | |

### 6.5 测试策略

| 测试类型 | 覆盖目标 | 工具 |
|---------|---------|------|
| 单元测试 | > 80% | JUnit5 + MockK |
| 集成测试 | 核心流程 | Hilt Testing |
| UI 测试 | 关键路径 | Compose Testing |
| 性能测试 | 关键指标 | Macrobenchmark |

---

## 7. 发布计划

### 7.1 版本规划

| 版本 | 功能范围 | 目标日期 |
|------|---------|---------|
| v1.0 MVP | P0 功能 | YYYY-MM-DD |
| v1.1 | P0 + P1 功能 | YYYY-MM-DD |
| v2.0 | 全部功能 | YYYY-MM-DD |

### 7.2 发布渠道

- [ ] Google Play Store
- [ ] 国内应用市场（华为、小米、OPPO、vivo 等）
- [ ] 内部测试 (Firebase App Distribution)

### 7.3 监控方案

| 监控项 | 工具 | 告警阈值 |
|--------|------|---------|
| 崩溃率 | Firebase Crashlytics | < 0.5% |
| ANR 率 | Android Vitals | < 0.1% |
| 用户行为 | Firebase Analytics | - |
| 性能 | Firebase Performance | - |

---

## 8. 附录

### 8.1 术语表

| 术语 | 定义 |
|------|------|
| | |

### 8.2 参考文档

- [Material Design 3](https://m3.material.io/)
- [Android Developer Guide](https://developer.android.com/)
- [Jetpack Compose](https://developer.android.com/jetpack/compose)

### 8.3 变更记录

| 版本 | 日期 | 修改内容 | 修改人 |
|------|------|---------|--------|
| v1.0 | YYYY-MM-DD | 初始版本 | |
```
